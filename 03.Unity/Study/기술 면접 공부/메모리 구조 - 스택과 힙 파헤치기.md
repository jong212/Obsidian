> [!Tip]+ 참고 블로그 내용 정리 잘 되어있음
> https://m.blog.naver.com/i_am_gamer/223115148314

> [!Tip]+ 면접 답변 BEST 
> 키워드 : LIFO > 속도
> 
> [LIFO]  
스택은 LIFO(Last In, First Out) 구조로, 함수 호출 시 자동으로 메모리가 할당되고 함수가 끝나면 자동으로 해제됩니다. 반면에 힙은 자유로운 메모리 영역으로, 필요에 따라 동적으로 메모리를 할당하고 직접 해제해야 합니다.
>
> [속도]  
스택은 매우 빠르며, 주로 함수의 지역 변수나 함수 호출 정보를 저장합니다.  
반면에 힙은 상대적으로 느리며, 동적으로 메모리를 할당하고 해제하다보니 가비지 컬렉터의 대상이다 보니 메모리 누수 가능성이 있습니다.
>
>개인 요약
속도적인 부분에서는 스택은 빠르다 보니 가벼운 데이터들이 주로 저장되는데요 스택은 함수 매게변수나 지역변수 그리고 함수 호출 스택과 같은 정보들이 저장되고 반면에 힙은 스택보다 느립니다 메모리를 직접 할당하고 해제해야 하다 보니 속도가 느립니다.


> 
> 


## 짧은 답변
"스택은 함수 호출 시 지역 변수를 저장하고, 힙은 동적으로 할당된 객체를 저장합니다. 스택은 LIFO(Last In, First Out) 방식으로 작동해 빠르고 자동으로 메모리를 관리하지만, 힙은 동적 할당으로 인해 관리가 복잡하고 성능이 느릴 수 있습니다."
## **딥한 답변:**

"스택과 힙은 메모리 관리에서 중요한 역할을 합니다.

**스택**은 함수 호출 시 생성되는 지역 변수, 매개변수, 함수의 호출 정보 등을 저장하는 메모리 영역입니다. 스택은 LIFO(Last In, First Out) 방식으로 작동하며, 함수가 호출되면 메모리가 스택에 할당되고 함수가 끝나면 자동으로 해제됩니다. 스택은 매우 빠르지만, 제한된 크기를 가지며, 주로 짧은 생명 주기를 가지는 데이터에 사용됩니다.

반면, **힙**은 동적으로 할당된 메모리를 저장하는 영역입니다. 예를 들어, 객체나 배열 같은 데이터 구조가 동적으로 생성될 때 힙 메모리를 사용합니다. 힙 메모리는 스택보다 크지만, 할당과 해제가 명시적으로 이루어져야 하며, 가비지 컬렉션을 통해 메모리를 관리합니다. 이로 인해 힙은 메모리 할당과 해제가 더 느리고, 잘못 관리하면 메모리 누수 같은 문제가 발생할 수 있습니다.

게임 개발에서는 이러한 메모리 구조를 잘 이해하고, 각 상황에 맞는 메모리 관리 방식을 선택하는 것이 중요합니다. 예를 들어, 실시간 게임에서 성능을 최적화하기 위해 스택 메모리를 최대한 활용하지만, 큰 데이터 구조나 객체는 힙을 사용해야 합니다. 메모리 관리의 복잡성과 성능 간의 균형을 맞추는 것이 게임 성능 최적화의 핵심입니다."

## **스택 떠오르는 키워드**
함수, 지역, 매게변수, 후입선출방식, 빠름 

 **힙 하면 떠오르는 키워드**
 동적, 객체, 배열, 힙>스텍(메모리크기), 가비지 컬렉터

**포인트**
실시간 게임 및 성능최적화에는 스택 메모리를 최대한 사용해야 함
큰 데이터 구조나 객체는 힙을 사용해야 함



메모리 구조가 뭘까?
왜 알아야 할까?

유니티로 게임을 만들려면 메모리 구조를 알아야 한다고 한다.
메모리? 내가 아는 RAM 카드 그것이 메모리이다!
우리가 작성하는 코드가 여기 RAM에 저장 된다

일반적인 메모리 구조는 아래와 같이 생겼다.
![[Pasted image 20240908202047.png|200]]

**코드영역**

말 그대로 코드의 글자가 저장되는 영역.
근데 컴퓨터는 0과1로만 이해하기 때문에 이 텍스트들을 0과 1로 변환해 줘야 함
변환하기 전 어딘가에 저장을 해놔야 할텐데 그 영역이 코드 영역임
![[Pasted image 20240908232807.png|300]]

**데이터 영역**
이 데이터라는 영역에는 프로그램 실행중 메모리에 유지되어야 하는 데이터가 담기는데 
주로 전역 변수(Global variables) 정적 변수(Static Variables)가 담긴다.

![[Pasted image 20240908233013.png]]

**스택**

함수 호출 시 지역변수와 매개변수는 "스택" 메모리에 저장되고 다 사용했으면 할당 된 메모리는 자동으로 해제 된다!

And
값 타입 변수 또한 스택 메모리에 저장된다 (int,float,char,bool,struct등등이 있다)
아 그리고 지역 변수 얘기가 나와서 그런데 함수의 지역변수는 함수 중괄호 안에서만 사용 가능하다

## **다시 한 번 강조하자면 함수의 호출이 끝나면 스택에 할당 된 메모리는 자동으로 해제**


**힙**
동적으로 할당된 메모리가 저장되는 영역입니다 예를들어 New 키워드를 사용해서 객체를 생성하면 이 객체는 힙 메모리에 저장됩니다.
\
아래 코드를 단계적으로 분석해 보자
Orc orc1 = new Orc(); 

new Orc 이건 Orc 클래스의 실체를 만드는 것이며 인스턴스라고 부른다 그니까 실체화 된 데이터가 "힙"에 저장된다
그리고 그 힙에 저장 된 실체 있잖아? 그 위치 주소를 "스택"에 담게 된다

그니까 new 키워드를 사용해서 객체를 만들면
스택에는 힙주소가 담겨있는 것이고 힙에는 객체의 실체가 있는 것이다.

다만 아래와 같이 함수의 호출이 종료 되면 스택에 할당 된 메모리는 자동으로 해제 된다
근데 이런식으로 스택 메모리만 해제 되면 메모리 가 부족할 수 있긴한데 
C#에서는 가비지 컬렉터가 가리키는 대상을 잃어버린 오브젝트를 알아서 해제시키기 때문에 상관?은 없다
![[Pasted image 20240909000026.png]]
아 그래서 오브젝트 풀을 안 쓰면 가비지 컬렉터가 도는건가?
![[Pasted image 20240909000233.png|800]]

ㅇㄹㄴ